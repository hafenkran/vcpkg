cmake_minimum_required(VERSION 2.6)

PROJECT( live555 )

file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/master.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/live.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/BasicUsageEnvironment.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/BasicUsageEnvironment  RENAME  CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/groupsock.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/groupsock  RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/liveMedia.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/liveMedia  RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/mediaServer.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/mediaServer  RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/proxyServer.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/proxyServer  RENAME CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/testProgs.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/testProgs  RENAME  CMakeLists.txt)
file(INSTALL ${CMAKE_CURRENT_SOURCE_DIR}/UsageEnvironment.txt DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/src/live/UsageEnvironment RENAME CMakeLists.txt)


set(BUILD ${CMAKE_CURRENT_SOURCE_DIR}/src/build)

message(STATUS "${BUILD} is here")
file(MAKE_DIRECTORY ${BUILD})
execute_process(COMMAND ${CMAKE_COMMAND} .. WORKING_DIRECTORY ${BUILD})

execute_process(COMMAND ${CMAKE_COMMAND} --build . WORKING_DIRECTORY ${BUILD})